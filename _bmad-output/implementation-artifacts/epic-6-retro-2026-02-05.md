# Epic 6 Retrospective: Feedback via issues GitHub

Date: 2026-02-05

## Epic Summary

- **Stories delivered:** 2/2 (100%)
- **Stories:** 6.1 Commentaire sur story → issue GitHub, 6.2 Nouvelle story/bug via formulaire dédié
- **FRs couverts:** FR28, FR29, FR30, FR31

## What Went Well

- **Création d'issue < 5s:** L'appel serveur via `POST /api/github/issues` crée l'issue et retourne le résultat rapidement. Le toast de succès avec lien direct vers l'issue GitHub est une bonne UX.
- **Labels automatiques bien pensés:** La logique de labels (`bmad-comment`, `bmad-new-story`, `bmad-bug`, `bmad-improvement`, `bmad-pending`, `priority: {p}`, `story: {id}`, `epic: {id}`) permet un tri efficace côté GitHub.
- **Templates d'issues maintenables:** `issueTemplates.ts` centralise la génération des bodies Markdown — facile à modifier sans toucher aux composants.
- **Bouton flottant contextuel:** Le bouton "New Story / Report Bug" n'apparaît que dans le contexte repo (route `/repos/*`) — pas de pollution sur le dashboard ou la landing.
- **Préservation du texte en cas d'erreur:** Si la création d'issue échoue, le contenu du formulaire est préservé (AC:3 story 6.1). L'utilisateur ne perd pas son travail.

## What Could Be Improved

- **Pas de preview Markdown:** Le formulaire de commentaire et le modal "New Story" n'offrent pas de preview du Markdown avant soumission. Un toggle "Preview" serait utile.
- **Pas de vérification de doublons:** Rien n'empêche de créer deux issues identiques si l'utilisateur clique deux fois rapidement (le loading state bloque le bouton mais un double-click rapide pourrait passer).
- **Labels créés à la volée:** Si les labels n'existent pas encore sur le repo GitHub, l'API les crée automatiquement, mais sans couleur custom. Il faudrait un setup initial des labels BMAD.

## Key Insights

- Le pattern "formulaire local → API serveur → GitHub issue" est propre et sécurisé : le token GitHub n'est jamais exposé côté client, et la validation auth + ownership se fait côté serveur.
- Les prefixes de titre (`[BMAD Comment]`, `[NEW STORY]`, `[BMAD Bug]`, `[BMAD Improvement]`) permettent un filtrage facile côté GitHub — convention simple et efficace.

## Action Items

1. **Preview Markdown** — ajouter un toggle dans CommentForm et NewStoryModal
2. **Debounce soumission** — désactiver le bouton submit pendant 2s après un clic pour éviter les doublons
3. **Setup labels BMAD** — créer un script ou endpoint pour initialiser les labels avec couleurs sur un repo

## Readiness Assessment

- [x] Tous les AC satisfaits
- [x] Commentaire → issue GitHub < 5s
- [x] Labels BMAD appliqués automatiquement
- [x] Formulaire nouvelle story/bug fonctionnel
- [x] Toast succès avec lien GitHub
- [x] Texte préservé en cas d'erreur
